<?php
// config/update_schema_cart.php
require_once 'db.php';

try {
    $database = new Database();
    $db = $database->getConnection();

    echo "Creating cart table...\n";

    $sql_cart = "CREATE TABLE IF NOT EXISTS cart (
        cart_id INT AUTO_INCREMENT PRIMARY KEY,
        user_id INT NOT NULL,
        product_id INT NOT NULL,
        quantity INT DEFAULT 1,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE,
        FOREIGN KEY (product_id) REFERENCES products(product_id) ON DELETE CASCADE,
        UNIQUE(user_id, product_id)
    )";
    $db->exec($sql_cart);

    echo "Cart table created successfully.\n";

} catch (PDOException $e) {
    echo "Error: " . $e->getMessage();
}
?>